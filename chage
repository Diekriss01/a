#include <Wire.h>
#include <LiquidCrystal_I2C.h>

LiquidCrystal_I2C lcd(0x27, 16, 2); // LCD address: 0x27, 16 columns, 2 rows

const byte coinSensorPin = 2; // Digital pin connected to the coin sensor
int coinCount = 0; // Counter for the number of coins

void setup() {
  lcd.init(); // Initialize the LCD
  lcd.backlight(); // Turn on the backlight
  lcd.setCursor(0, 0);
  lcd.print("Coins detected:");
  updateLCD(); // Display initial coin count
  pinMode(coinSensorPin, INPUT_PULLUP); // Set coin sensor pin as input with internal pull-up resistor
  Serial.begin(9600); // Initialize serial communication
}

void loop() {
  // Check for coin sensor input
  if (digitalRead(coinSensorPin) == LOW) {
    delay(50); // Debounce delay
    if (digitalRead(coinSensorPin) == LOW) {
      coinCount++; // Increment the coin count
      updateLCD(); // Update the LCD display with the new coin count
    }
  }

  // Check for serial input
  if (Serial.available() > 0) {
    char input = Serial.read();
    if (input == 'c') {
      coinCount++; // Increment the coin count
      updateLCD(); // Update the LCD display with the new coin count
    }
  }

  // Add any other operations or delays here
}

void updateLCD() {
  lcd.setCursor(0, 1);
  lcd.print("          "); // Clear the previous count
  lcd.setCursor(0, 1);
  lcd.print(coinCount); // Update the LCD display with the new coin count
}
